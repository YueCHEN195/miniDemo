webpackJsonp([1],{"+jWS":function(t,e){},"6lt2":function(t,e){},"90M4":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Xxa5"),i=n.n(o),a=n("exGp"),r=n.n(a),s=n("mvHQ"),c=n.n(s),u={data:function(){return{popularity:0,comments:0,favourState:!1,starState:!1}},props:["id","title","img"],created:function(){this.getStoryDetail(this.id)},activated:function(){this.id!=this.$route.params.id&&(this.popularity=0,this.comments=0,this.favourState=!1,this.starState=!1,this.getStoryDetail(this.$route.params.id))},methods:{back:function(){this.$router.go(-1)},getStoryDetail:function(t){var e=this;return r()(i.a.mark(function n(){var o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$http.get("/v1/contents/extra/"+t);case 3:o=n.sent,e.popularity=o.data.DES.popularity,e.comments=o.data.DES.comments,n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}},n,e,[[0,8]])}))()},addToCollection:function(){this.starState=!0;window.localStorage,c()({id:this.id,title:this.title,img:this.img});this.$toast({message:"已添加至收藏",positon:"bottom"})},removeFromCollection:function(){this.starState=!1,window.localStorage.removeItem(this.id),this.$toast({message:"已从收藏列表移除",positon:"bottom"})},addFavour:function(){this.favourState=!0,this.$toast({message:"已点赞",positon:"bottom"})},removeFavour:function(){this.favourState=!1,this.$toast({message:"已取消点赞",positon:"bottom"})}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-tabbar",{attrs:{"active-color":"#7d7e80"}},[n("van-tabbar-item",{attrs:{icon:"arrow-left"},on:{click:t.back}},[t._v("后退")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"comment-o",info:t.comments,to:"/home/newsinfo/comments/"+t.id}},[t._v("评论")]),t._v(" "),t.favourState?t._e():n("van-tabbar-item",{attrs:{icon:"good-job-o",info:t.popularity},on:{click:t.addFavour}},[t._v("点赞")]),t._v(" "),t.favourState?n("van-tabbar-item",{attrs:{icon:"good-job",info:t.popularity+1},on:{click:t.removeFavour}},[t._v("点赞")]):t._e(),t._v(" "),t.starState?t._e():n("van-tabbar-item",{attrs:{icon:"star-o"},on:{click:t.addToCollection}},[t._v("收藏")]),t._v(" "),t.starState?n("van-tabbar-item",{attrs:{icon:"star"},on:{click:t.removeFromCollection}},[t._v("收藏")]):t._e()],1)},staticRenderFns:[]};var d=n("VU/8")(u,l,!1,function(t){n("6lt2")},null,null).exports,v=(n("AbTX"),{name:"my-content",data:function(){return{id:this.$route.params.id,newsinfo:{},loading:!0}},components:{Footer:d},created:function(){this.getContent(this.id)},activated:function(){this.id!=this.$route.params.id&&(this.newsinfo={},this.loading=!0,this.getContent(this.$route.params.id),this.id=this.$route.params.id)},methods:{getContent:function(t){var e=this;return r()(i.a.mark(function n(){var o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$http.get("/v1/contents/"+t);case 3:o=n.sent,e.newsinfo=o.data.CONTENTS,e.newsinfo.rgb=e.hugToRgb(e.newsinfo.image_hue),e.loading=!1,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}},n,e,[[0,9]])}))()},hugToRgb:function(t){var e=t.substring(2,4),n=t.substring(4,6),o=t.substring(6,8);return[parseInt("0x"+e),parseInt("0x"+n),parseInt("0x"+o)]},back:function(){this.$router.go(-1)}}}),f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-page",attrs:{id:t.id}},[n("van-skeleton",{attrs:{title:"",row:7,"title-width":"100%",loading:t.loading}},[n("div",{staticClass:"content-header",style:{backgroundImage:"url("+t.newsinfo.image+")",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}},[t.newsinfo.rgb?n("div",{staticClass:"cover",style:{backgroundImage:"linear-gradient(0,rgba("+t.newsinfo.rgb[0]+","+t.newsinfo.rgb[1]+","+t.newsinfo.rgb[2]+",1),rgba("+t.newsinfo.rgb[0]+","+t.newsinfo.rgb[1]+","+t.newsinfo.rgb[2]+",0.9),rgba("+t.newsinfo.rgb[0]+","+t.newsinfo.rgb[1]+","+t.newsinfo.rgb[2]+",0))"}},[n("div",{staticClass:"author"},[t._v("\n          "+t._s(t.newsinfo.image_source)+"\n        ")]),t._v(" "),n("div",{staticClass:"title"},[t._v("\n          "+t._s(t.newsinfo.title)+"\n        ")])]):t._e()]),t._v(" "),n("div",{staticClass:"detail-content",domProps:{innerHTML:t._s(t.newsinfo.body)}})]),t._v(" "),n("Footer",{attrs:{id:t.id,title:t.newsinfo.title,img:t.newsinfo.image}})],1)},staticRenderFns:[]};var g=n("VU/8")(v,f,!1,function(t){n("+jWS")},null,null);e.default=g.exports},AbTX:function(t,e){},mvHQ:function(t,e,n){t.exports={default:n("qkKv"),__esModule:!0}},qkKv:function(t,e,n){var o=n("FeBl"),i=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}}});
//# sourceMappingURL=1.0b875287756cf1b5aa55.js.map