webpackJsonp([1],{"+jWS":function(t,e){},"02pT":function(t,e){},"1H7Z":function(t,e){},"5I9V":function(t,e){},"6lt2":function(t,e){},"8mkH":function(t,e){},"97dx":function(t,e){},"9axB":function(t,e){},AbTX:function(t,e){},I7eg:function(t,e){},JsOw:function(t,e){},NAlg:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("k3b4");var a=n("+2ln"),s=(n("eqfM"),n("/QYm")),o=(n("FO5P"),n("woHG")),i=(n("1E9F"),n("2Ux5")),r=(n("RgoE"),n("0KWt")),c=(n("nsOR"),n("WMi1")),u=(n("nOaS"),n("pIDD")),l=(n("yffH"),n("sdMh")),v=(n("9++/"),n("QhyB")),m=(n("zP7x"),n("rD0v")),d=(n("3AsM"),n("7ZPY")),f=n("7+uW"),h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("keep-alive",{attrs:{include:["home","my-content"]}},[e("router-view",{directives:[{name:"transition",rawName:"v-transition"}]})],1)],1)},staticRenderFns:[]};var g=n("VU/8")({name:"App",data:function(){return{transitionName:""}},watch:{$route:function(t,e){t.meta.index>e.meta.index?this.transitionName="fold-left":this.transitionName="fold-right"}}},h,!1,function(t){n("eZ/W")},null,null).exports,p=n("/ocq"),_=n("Xxa5"),b=n.n(_),w=n("BO1k"),C=n.n(w),k=n("exGp"),S=n.n(k),x={data:function(){return{month:"一月",day:"26",msg:"数据来源：知乎"}},created:function(){this.getTime()},methods:{getTime:function(){var t=new Date;this.month=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][t.getMonth()],this.day=t.getDate()}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("header",{staticClass:"header-box"},[n("div",{staticClass:"title"},[n("div",{staticClass:"date-box"},[n("span",{staticClass:"date"},[t._v(t._s(t.day))]),t._v(" "),n("span",{staticClass:"month"},[t._v(t._s(t.month))])]),t._v(" "),n("h3",[t._v(t._s(t.msg))])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pic"},[e("a",[e("img",{attrs:{src:"https://pic4.zhimg.com/v2-3a8a6d4d765918bf8e873f8bb08f7416_is.jpg"}})])])}]};var N={name:"home",components:{Header:n("VU/8")(x,y,!1,function(t){n("NSAC")},null,null).exports},data:function(){return{topNews:[],otherNews:[],date:"",page:0,index:"",loading:!1,finished:!1,refreshing:!1,homepageLoading:!0}},created:function(){this.getLastNews()},methods:{getLastNews:function(){var t=this;return S()(b.a.mark(function e(){var n,a,s,o,i,r,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get("/v1/last-stories");case 3:for(n=e.sent,t.topNews=n.data.STORIES.top_stories,a=!0,s=!1,o=void 0,e.prev=8,i=C()(t.topNews);!(a=(r=i.next()).done);a=!0)(c=r.value).rgb=t.hugToRgb(c.image_hue);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),s=!0,o=e.t0;case 16:e.prev=16,e.prev=17,!a&&i.return&&i.return();case 19:if(e.prev=19,!s){e.next=22;break}throw o;case 22:return e.finish(19);case 23:return e.finish(16);case 24:t.otherNews=t.otherNews.concat(n.data.STORIES.stories),t.date=n.data.STORIES.date,t.homepageLoading=!1,e.next=32;break;case 29:e.prev=29,e.t1=e.catch(0),console.log(e.t1);case 32:case"end":return e.stop()}},e,t,[[0,29],[8,12,16,24],[17,,19,23]])}))()},getListByPage:function(){var t=this;return S()(b.a.mark(function e(){var n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.refreshing&&(t.otherNews=[],t.refreshing=!1),e.prev=1,t.index=t.reduceDate(t.date,t.page),e.next=5,t.$http.get("/v1/before-stories/"+t.index);case 5:n=e.sent,t.otherNews=t.otherNews.concat(n.data.STORIES.stories),t.loading=!1,t.page++,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}},e,t,[[1,11]])}))()},onRefresh:function(){this.finished=!1,this.loading=!0,this.getListByPage()},hugToRgb:function(t){var e=t.substring(2,4),n=t.substring(4,6),a=t.substring(6,8);return[parseInt("0x"+e),parseInt("0x"+n),parseInt("0x"+a)]},reduceDate:function(t,e){t=t.substring(0,4)+"-"+t.substring(4,6)+"-"+t.substring(6,8);var n=new Date(t);n.setDate(n.getDate()-e);var a=(n.getMonth()+1).toString().padStart(2,"0");return n.getFullYear().toString()+a+n.getDate().toString().padStart(2,"0")}}},$={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-container"},[n("Header"),t._v(" "),t.homepageLoading?n("van-loading",{attrs:{size:"45",vertical:""}},[t._v("加载中...")]):t._e(),t._v(" "),n("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:5e3,"indicator-color":"white"}},t._l(t.topNews,function(e){return n("van-swipe-item",{key:e.id,style:{backgroundImage:"url("+e.image+")",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}},[n("router-link",{staticClass:"link",attrs:{to:"/home/newsinfo/"+e.id,tag:"div"}},[n("div",{staticClass:"cover",style:{backgroundImage:"linear-gradient(0,rgba("+e.rgb[0]+","+e.rgb[1]+","+e.rgb[2]+",1),rgba("+e.rgb[0]+","+e.rgb[1]+","+e.rgb[2]+",0.9),rgba("+e.rgb[0]+","+e.rgb[1]+","+e.rgb[2]+",0))"}},[n("div",{staticClass:"author"},[t._v("\n         "+t._s(e.hint)+"\n       ")]),t._v(" "),n("div",{staticClass:"title"},[t._v("\n         "+t._s(e.title)+"\n       ")])])])],1)}),1),t._v(" "),n("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1,offset:50},on:{load:t.getListByPage},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.otherNews,function(e){return n("router-link",{key:e.id,staticClass:"news-list",attrs:{tag:"li",to:"/home/newsinfo/"+e.id}},[n("div",{staticClass:"list-word"},[n("div",{staticClass:"list-title",attrs:{id:"list-word"}},[t._v(t._s(e.title))]),t._v(" "),n("div",{staticClass:"list-author"},[t._v(t._s(e.hint))])]),t._v(" "),n("div",{staticClass:"list-img"},[n("img",{attrs:{src:e.images[0]}})])])}),1)],1)],1)},staticRenderFns:[]};var F=n("VU/8")(N,$,!1,function(t){n("9axB")},null,null).exports,T=n("mvHQ"),L=n.n(T),R={data:function(){return{popularity:0,comments:0,favourState:!1,starState:!1}},props:["id","title","img"],created:function(){this.getStoryDetail(this.id)},activated:function(){this.id!=this.$route.params.id&&(this.popularity=0,this.comments=0,this.favourState=!1,this.starState=!1,this.getStoryDetail(this.$route.params.id))},methods:{back:function(){this.$router.go(-1)},getStoryDetail:function(t){var e=this;return S()(b.a.mark(function n(){var a;return b.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$http.get("/v1/contents/extra/"+t);case 3:a=n.sent,e.popularity=a.data.DES.popularity,e.comments=a.data.DES.comments,n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}},n,e,[[0,8]])}))()},addToCollection:function(){this.starState=!0;window.localStorage,L()({id:this.id,title:this.title,img:this.img});this.$toast({message:"已添加至收藏",positon:"bottom"})},removeFromCollection:function(){this.starState=!1,window.localStorage.removeItem(this.id),this.$toast({message:"已从收藏列表移除",positon:"bottom"})},addFavour:function(){this.favourState=!0,this.$toast({message:"已点赞",positon:"bottom"})},removeFavour:function(){this.favourState=!1,this.$toast({message:"已取消点赞",positon:"bottom"})}}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-tabbar",{attrs:{"active-color":"#7d7e80"}},[n("van-tabbar-item",{attrs:{icon:"arrow-left"},on:{click:t.back}},[t._v("后退")]),t._v(" "),n("van-tabbar-item",{attrs:{icon:"comment-o",info:t.comments,to:"/home/newsinfo/comments/"+t.id}},[t._v("评论")]),t._v(" "),t.favourState?t._e():n("van-tabbar-item",{attrs:{icon:"good-job-o",info:t.popularity},on:{click:t.addFavour}},[t._v("点赞")]),t._v(" "),t.favourState?n("van-tabbar-item",{attrs:{icon:"good-job",info:t.popularity+1},on:{click:t.removeFavour}},[t._v("点赞")]):t._e(),t._v(" "),t.starState?t._e():n("van-tabbar-item",{attrs:{icon:"star-o"},on:{click:t.addToCollection}},[t._v("收藏")]),t._v(" "),t.starState?n("van-tabbar-item",{attrs:{icon:"star"},on:{click:t.removeFromCollection}},[t._v("收藏")]):t._e()],1)},staticRenderFns:[]};var D=n("VU/8")(R,E,!1,function(t){n("6lt2")},null,null).exports,I=(n("AbTX"),{name:"my-content",data:function(){return{id:this.$route.params.id,newsinfo:{},loading:!0}},components:{Footer:D},created:function(){this.getContent(this.id)},activated:function(){this.id!=this.$route.params.id&&(this.newsinfo={},this.loading=!0,this.getContent(this.$route.params.id),this.id=this.$route.params.id)},methods:{getContent:function(t){var e=this;return S()(b.a.mark(function n(){var a;return b.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.$http.get("/v1/contents/"+t);case 3:a=n.sent,e.newsinfo=a.data.CONTENTS,e.newsinfo.rgb=e.hugToRgb(e.newsinfo.image_hue),e.loading=!1,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}},n,e,[[0,9]])}))()},hugToRgb:function(t){var e=t.substring(2,4),n=t.substring(4,6),a=t.substring(6,8);return[parseInt("0x"+e),parseInt("0x"+n),parseInt("0x"+a)]},back:function(){this.$router.go(-1)}}}),M={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-page",attrs:{id:t.id}},[n("van-skeleton",{attrs:{title:"",row:7,"title-width":"100%",loading:t.loading}},[n("div",{staticClass:"content-header",style:{backgroundImage:"url("+t.newsinfo.image+")",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}},[t.newsinfo.rgb?n("div",{staticClass:"cover",style:{backgroundImage:"linear-gradient(0,rgba("+t.newsinfo.rgb[0]+","+t.newsinfo.rgb[1]+","+t.newsinfo.rgb[2]+",1),rgba("+t.newsinfo.rgb[0]+","+t.newsinfo.rgb[1]+","+t.newsinfo.rgb[2]+",0.9),rgba("+t.newsinfo.rgb[0]+","+t.newsinfo.rgb[1]+","+t.newsinfo.rgb[2]+",0))"}},[n("div",{staticClass:"author"},[t._v("\n          "+t._s(t.newsinfo.image_source)+"\n        ")]),t._v(" "),n("div",{staticClass:"title"},[t._v("\n          "+t._s(t.newsinfo.title)+"\n        ")])]):t._e()]),t._v(" "),n("div",{staticClass:"detail-content",domProps:{innerHTML:t._s(t.newsinfo.body)}})]),t._v(" "),n("Footer",{attrs:{id:t.id,title:t.newsinfo.title,img:t.newsinfo.image}})],1)},staticRenderFns:[]};var O=n("VU/8")(I,M,!1,function(t){n("+jWS")},null,null).exports,H=n("oqQY"),W=n.n(H),j={name:"comment",filters:{timeFormat:function(t){return W()(t).format("MM-DD HH:mm")}},data:function(){return{id:this.$route.params.id,longComments:[],shortComments:[],longCommentsN:0,shortCommentsN:0,longLoading:!0,shortLoading:!0}},created:function(){this.getLongComments(),this.getShortComments()},methods:{getShortComments:function(){var t=this;return S()(b.a.mark(function e(){var n,a,s,o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/v1/contents/"+t.id+"/short-comments");case 2:for(n=e.sent,a=n.data.COMMENTS.comments,s=a.length,o=0;o<s;o++)a[o].favourState=!1;t.shortComments=a,t.shortCommentsN=t.shortComments.length,t.shortLoading=!1;case 9:case"end":return e.stop()}},e,t)}))()},getLongComments:function(){var t=this;return S()(b.a.mark(function e(){var n,a,s,o;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/v1/contents/"+t.id+"/long-comments");case 2:for(n=e.sent,a=n.data.COMMENTS.comments,s=a.length,o=0;o<s;o++)a[o].favourState=!1;t.longComments=a,t.longCommentsN=t.longComments.length,t.longLoading=!1;case 9:case"end":return e.stop()}},e,t)}))()},back:function(){this.$router.go(-1)},addFavour:function(t,e){0===e?this.longComments[t].favourState=!0:this.shortComments[t].favourState=!0},removeFavour:function(t,e){0===e?this.longComments[t].favourState=!1:this.shortComments[t].favourState=!1}},computed:{totalComments:function(){return this.longCommentsN+this.shortCommentsN}}},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:t.totalComments+"条评论","left-text":"返回","left-arrow":""},on:{"click-left":t.back}}),t._v(" "),n("van-skeleton",{attrs:{title:"",avatar:"",row:10,loading:t.longLoading}},[n("ul",{staticClass:"long-comments"},t._l(t.longComments,function(e,a){return n("li",{key:e.id,staticClass:"comments-container"},[n("div",{staticClass:"pic"},[n("img",{attrs:{src:e.avatar}})]),t._v(" "),n("div",{staticClass:"comments"},[n("div",{staticClass:"name"},[t._v(t._s(e.author))]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),void 0!=e.reply_to&&void 0!=e.reply_to.author?n("div",{staticClass:"replay"},[t._v(t._s("// "+e.reply_to.author+" ： "+e.reply_to.content))]):t._e(),t._v(" "),n("div",{staticClass:"others"},[n("div",[t._v(t._s(t._f("timeFormat")(e.time)))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.favourState,expression:"!item.favourState"}],staticClass:"icon-container",on:{click:function(e){return t.addFavour(a,0)}}},[n("div",{staticStyle:{"font-size":"0.9rem"}},[t._v(t._s(e.likes))]),t._v(" "),n("van-icon",{attrs:{name:"good-job-o"}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.favourState,expression:"item.favourState"}],staticClass:"icon-container",on:{click:function(e){return t.removeFavour(a,0)}}},[n("div",{staticStyle:{"font-size":"0.9rem"}},[t._v(t._s(e.likes+1))]),t._v(" "),n("van-icon",{attrs:{name:"good-job"}})],1)])])])}),0)]),t._v(" "),n("van-skeleton",{attrs:{title:"",avatar:"",row:10,loading:t.shortLoading}},[n("ul",t._l(t.shortComments,function(e,a){return n("li",{key:e.id,staticClass:"comments-container"},[n("div",{staticClass:"pic"},[n("img",{attrs:{src:e.avatar}})]),t._v(" "),n("div",{staticClass:"comments"},[n("div",{staticClass:"name"},[t._v(t._s(e.author))]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(e.content))]),t._v(" "),void 0!=e.reply_to&&void 0!=e.reply_to.author?n("div",{staticClass:"replay"},[t._v(t._s("// "+e.reply_to.author+" ： "+e.reply_to.content))]):t._e(),t._v(" "),n("div",{staticClass:"others"},[n("div",[t._v(t._s(t._f("timeFormat")(e.time)))]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.favourState,expression:"!item.favourState"}],staticClass:"icon-container",on:{click:function(e){return t.addFavour(a,1)}}},[n("div",{staticStyle:{"font-size":"0.9rem"}},[t._v(t._s(e.likes))]),t._v(" "),n("van-icon",{attrs:{name:"good-job-o"}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.favourState,expression:"item.favourState"}],staticClass:"icon-container",on:{click:function(e){return t.removeFavour(a,1)}}},[n("div",{staticStyle:{"font-size":"0.9rem"}},[t._v(t._s(e.likes+1))]),t._v(" "),n("van-icon",{attrs:{name:"good-job"}})],1)])])])}),0)])],1)},staticRenderFns:[]};var B=n("VU/8")(j,z,!1,function(t){n("8mkH")},"data-v-871fb68e",null).exports,P=new p.a({routes:[{path:"/",redirect:"/home"},{path:"/home",component:F,name:"home",meta:{index:0}},{path:"/home/newsinfo/:id",component:O,name:"content",meta:{index:1}},{path:"/home/newsinfo/comments/:id",component:B,name:"comment",meta:{index:2}}]}),U=n("mtWM"),A=n.n(U).a.create({baseURL:"https://zhihu-daily.leanapp.cn/api"}),V=n("wRhW"),Z=n.n(V);document.addEventListener("plusready",function(){var t=plus.webview.currentWebview();plus.key.addEventListener("backbutton",function(){t.canBack(function(e){if(e.canBack)t.back();else{var n=null;plus.key.addEventListener("backbutton",function(){Object(s.a)({message:"再按一次退出应用",position:"bottom"}),n?(new Date).getTime()-n<1500&&plus.runtime.quit():(n=(new Date).getTime(),setTimeout(function(){n=null},1e3))},!1)}})})}),f.a.prototype.$http=A,f.a.use(d.a),f.a.use(m.a),f.a.use(v.a),f.a.use(l.a),f.a.use(u.a),f.a.use(c.a),f.a.use(r.a),f.a.use(i.a),f.a.use(o.a),f.a.use(s.a),f.a.use(a.a),f.a.use(p.a),f.a.use(Z.a,P,{shadow:!1});new f.a({el:"#app",render:function(t){return t(g)},router:P})},NSAC:function(t,e){},QOoJ:function(t,e){},T2s0:function(t,e){},W0KU:function(t,e){},WpgC:function(t,e){},ZZgd:function(t,e){},"eZ/W":function(t,e){},eh36:function(t,e){},hW8u:function(t,e){},nLpc:function(t,e){},nsZj:function(t,e){},oPmM:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c729ca3d82cf1a474feb.js.map