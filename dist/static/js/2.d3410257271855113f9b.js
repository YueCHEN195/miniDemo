webpackJsonp([2],{"9axB":function(t,e){},BO1k:function(t,e,s){t.exports={default:s("fxRn"),__esModule:!0}},NSAC:function(t,e){},fxRn:function(t,e,s){s("+tPU"),s("zQR9"),t.exports=s("g8Ux")},g8Ux:function(t,e,s){var a=s("77Pl"),n=s("3fs2");t.exports=s("FeBl").getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return a(e.call(t))}},j7e0:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("Xxa5"),n=s.n(a),r=s("BO1k"),i=s.n(r),o=s("exGp"),c=s.n(o),l={data:function(){return{month:"一月",day:"26",msg:"数据来源：知乎"}},created:function(){this.getTime()},methods:{getTime:function(){var t=new Date;this.month=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][t.getMonth()],this.day=t.getDate()}}},d={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("header",{staticClass:"header-box"},[s("div",{staticClass:"title"},[s("div",{staticClass:"date-box"},[s("span",{staticClass:"date"},[t._v(t._s(t.day))]),t._v(" "),s("span",{staticClass:"month"},[t._v(t._s(t.month))])]),t._v(" "),s("h3",[t._v(t._s(t.msg))])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pic"},[e("a",[e("img",{attrs:{src:"https://pic4.zhimg.com/v2-3a8a6d4d765918bf8e873f8bb08f7416_is.jpg"}})])])}]};var g={name:"home",components:{Header:s("VU/8")(l,d,!1,function(t){s("NSAC")},null,null).exports},data:function(){return{topNews:[],otherNews:[],date:"",page:0,index:"",loading:!1,finished:!1,refreshing:!1,homepageLoading:!0}},created:function(){this.getLastNews()},methods:{getLastNews:function(){var t=this;return c()(n.a.mark(function e(){var s,a,r,o,c,l,d;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.get("/v1/last-stories");case 3:for(s=e.sent,t.topNews=s.data.STORIES.top_stories,a=!0,r=!1,o=void 0,e.prev=8,c=i()(t.topNews);!(a=(l=c.next()).done);a=!0)(d=l.value).rgb=t.hugToRgb(d.image_hue);e.next=16;break;case 12:e.prev=12,e.t0=e.catch(8),r=!0,o=e.t0;case 16:e.prev=16,e.prev=17,!a&&c.return&&c.return();case 19:if(e.prev=19,!r){e.next=22;break}throw o;case 22:return e.finish(19);case 23:return e.finish(16);case 24:t.otherNews=t.otherNews.concat(s.data.STORIES.stories),t.date=s.data.STORIES.date,t.homepageLoading=!1,e.next=32;break;case 29:e.prev=29,e.t1=e.catch(0),console.log(e.t1);case 32:case"end":return e.stop()}},e,t,[[0,29],[8,12,16,24],[17,,19,23]])}))()},getListByPage:function(){var t=this;return c()(n.a.mark(function e(){var s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.refreshing&&(t.otherNews=[],t.refreshing=!1),e.prev=1,t.index=t.reduceDate(t.date,t.page),e.next=5,t.$http.get("/v1/before-stories/"+t.index);case 5:s=e.sent,t.otherNews=t.otherNews.concat(s.data.STORIES.stories),t.loading=!1,t.page++,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}},e,t,[[1,11]])}))()},onRefresh:function(){this.finished=!1,this.loading=!0,this.getListByPage()},hugToRgb:function(t){var e=t.substring(2,4),s=t.substring(4,6),a=t.substring(6,8);return[parseInt("0x"+e),parseInt("0x"+s),parseInt("0x"+a)]},reduceDate:function(t,e){t=t.substring(0,4)+"-"+t.substring(4,6)+"-"+t.substring(6,8);var s=new Date(t);s.setDate(s.getDate()-e);var a=(s.getMonth()+1).toString().padStart(2,"0");return s.getFullYear().toString()+a+s.getDate().toString().padStart(2,"0")}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home-container"},[s("Header"),t._v(" "),t.homepageLoading?s("van-loading",{attrs:{size:"45",vertical:""}},[t._v("加载中...")]):t._e(),t._v(" "),s("van-swipe",{staticClass:"my-swipe",attrs:{autoplay:5e3,"indicator-color":"white"}},t._l(t.topNews,function(e){return s("van-swipe-item",{key:e.id,style:{backgroundImage:"url("+e.image+")",backgroundRepeat:"no-repeat",backgroundSize:"100% 100%"}},[s("router-link",{staticClass:"link",attrs:{to:"/home/newsinfo/"+e.id,tag:"div"}},[s("div",{staticClass:"cover",style:{backgroundImage:"linear-gradient(0,rgba("+e.rgb[0]+","+e.rgb[1]+","+e.rgb[2]+",1),rgba("+e.rgb[0]+","+e.rgb[1]+","+e.rgb[2]+",0.9),rgba("+e.rgb[0]+","+e.rgb[1]+","+e.rgb[2]+",0))"}},[s("div",{staticClass:"author"},[t._v("\n         "+t._s(e.hint)+"\n       ")]),t._v(" "),s("div",{staticClass:"title"},[t._v("\n         "+t._s(e.title)+"\n       ")])])])],1)}),1),t._v(" "),s("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1,offset:50},on:{load:t.getListByPage},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.otherNews,function(e){return s("router-link",{key:e.id,staticClass:"news-list",attrs:{tag:"li",to:"/home/newsinfo/"+e.id}},[s("div",{staticClass:"list-word"},[s("div",{staticClass:"list-title",attrs:{id:"list-word"}},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"list-author"},[t._v(t._s(e.hint))])]),t._v(" "),s("div",{staticClass:"list-img"},[s("img",{attrs:{src:e.images[0]}})])])}),1)],1)],1)},staticRenderFns:[]};var h=s("VU/8")(g,u,!1,function(t){s("9axB")},null,null);e.default=h.exports}});
//# sourceMappingURL=2.d3410257271855113f9b.js.map